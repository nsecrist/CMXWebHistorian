swagger: '2.0'
info:
  description: This is the JCE TADS WEbApplication API used to interact with the TADS database.
  version: 1.0.0
  title: JCE TADS API
  # put the contact info for your development or API team
  contact:
    email: nathan.secrist@jacobs.com

  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html

# tags are used for organizing operations
tags:
- name: Personnel
  description: Provides Access to Personnel Data
- name: Tags
  description: Provides operations on JCE Tags

paths:
  /personnel:
    get:
      tags:
      - Personnel
      summary: Returns an Array containing all Person records
      operationId: getPersonnel
      description: |
        Returns all records from the TADS Personnel Table
      produces:
      - application/json
      responses:
        200:
          description: results matching criteria
          schema:
            type: array
            items:
              $ref: '#/definitions/Person'
        500:
          description: Generic SQL Error
  /personnel/{id}:
      get:
        tags:
        - Personnel
        summary: Returns a single person matching the pid
        operationId: getPerson
        description: |
          Returns a single person record who's JCE_PID matches the parameter
        produces:
        - application/json
        parameters:
        - name: id
          in: path
          description: ID of person to fetch
          required: true
          type: integer
          format: int64
        responses:
          200:
            description: results matching criteria
            schema:
              type: object
              $ref: '#/definitions/Person'
          500:
            description: Generic SQL Error
  /subcontractor:
    post:
      tags:
      - Personnel
      summary: Adds a new person as a subcontractor to the personnel table
      operationId: addSub
      description: |
        Creates a new person with personnel role of 'Sub'.
      responses:
        200:
          description: POST to Subcontractor Successful!
        400:
          description: Content-type header was not set to JSON
        500:
          description: Generic SQL Error
  /visitor:
    post:
      tags:
      - Personnel
      summary: Adds a new person as a visitor to the personnel table
      operationId: addVisitor
      description: |
        Creates a new person with personnel role of 'Visitor'.
      responses:
        200:
          description: POST to Visitor Successful!
        400:
          description: Content-type header was not set to JSON
        500:
          description: Generic SQL Error
  /client:
    post:
      tags:
      - Personnel
      summary: Adds a new person as a client to the personnel table
      operationId: addClient
      description: |
        Creates a new person with personnel role of 'Client'.
      responses:
        200:
          description: POST to Client Successful!
        400:
          description: Content-type header was not set to JSON
        500:
          description: Generic SQL Error
  /Associate:
    post:
      tags:
      - Tags
      summary: Associates a given tag with a given person
      operationId: asscoiateTag
      description: |
        Associates the provided MAC Address with the provided JCE_PID
      responses:
        200:
          description: POST to Associate Successful!
        400:
          description: Content-type header was not set to JSON
        500:
          description: Generic SQL Error
  /Unassociate:
    post:
      tags:
      - Tags
      summary: Unassociates a given tag with a given person
      operationId: unasscoiateTag
      description: |
        Unassociates the provided MAC Address
      responses:
        200:
          description: POST to Associate Successful!
        400:
          description: Content-type header was not set to JSON
        500:
          description: Generic SQL Error
definitions:
  AssociateTag:
    description: "JSON Object that should be sent on POST requests to Associate and Unassociate"
    type: object
    required:
    - mac_address
    - jce_pid
    properties:
      mac_address:
        type: string
        example: "11:22:33:44:55"
      jce_pid:
        type: integer
        format: Int64
        example: 1
        description: Must be a valid jce_pid, call GET /Personnel for a list of all jce_pids
  Person:
    description: "NULL Values will never return from the API. If a field is missing from the JSON object, it's value was NULL"
    type: object
    required:
    - jce_pid
    - personnelrole
    - firstname
    - lastname
    properties:
      jce_pid:
        type: integer
        format: Int64
        example: 1
      personnelrole:
        type: string
        enum: [ "Client"
                ,"Craft"
                ,"Staff"
                ,"Sub"
                ,"Visitor"
              ]
        example: "Client"
      firstname:
        type: string
        example: "John"
      lastname:
        type: string
        example: "Doe"
      middlename:
        type: string
        example: "Francis"
      suffix:
        type: string
        example: "Sr."
      hiredate:
        type: string
        example: "2013-09-05 00:00:00.000"
      localjacobsbadgeid:
        type: string
        example: "1001"
      crcode_functioncode:
        type: string
        example: "X208"
      employeenumber:
        type: string
        example: "051234567"
      oraclepartyid:
        type: string
        example: "3531715"
      hrjobtitle:
        type: string
        example: "CARPENTER 03"
      localjobtitle:
        type: string
        example: "Carpenter"
        description: NULL very often in the database
      department:
        type: string
        example: "0000 GENERAL"
        description: Four digit number followed by a string
      shift:
        type: string
        example: "1A"
        description: Shift may somteims be a single number
      skill:
        type: string
        example: "CAREPENTER"
        description: This field is sometimes NULL
      class:
        type: string
        example: "CRAFT FOREMAN"
        description: More granular that skill, may help differenciate pay scale
      crewcode:
        type: string
        example: "I111"
      status:
        type: string
        example: "Y"
        description: Denotes whether or not the record is an active site employee. "Y" can be interpreted as "Active"
      jacobsstartdate:
        type: string
        example: "2017-05-04 00:00:00.000"
        description: Date hired on by Jacobs
      locationstartdate:
        type: string
        example: "2015-09-30 00:00:00.000"
        description: Date assigned to location/site. In some cases this date is earlier than JacobsStartDate
      locationtermdate:
        type: string
        example: "2017-06-23 00:00:00.000"
        description: Date terminated from site, value should be NULL unless the person is no longer active
      datelastchange:
        type: string
        example: "2017-08-01 00:00:00.000"
        description: Last time this person's record was modified within FTS
      company:
        type: string
        example: "Jacobs"
# host: 10.4.201.17:3000
# basePath: http://10.4.201.17:3000/tas/api/v1
schemes:
 - https
